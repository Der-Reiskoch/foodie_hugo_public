"use strict";var lazyLoadImages,initMarker,scrollHandler,initTopNavScrollHandler,initScrollToTopScrollHandler,scrollToTop,scrollSelectedTimelineItemIntoView,initServiceWorker,initPantryDisclaimer,loadAds,hasCookieBannerBeenDisplayed,hasCookieConsentBeenGiven,showAdSlots,activateCookieDependendFunctionality,initCookieHandling,comments;(function(e,t){var o=e.querySelector(".menu__btn-title"),s=e.querySelector(".foodie-mobile-menu__list");function i(){s.classList.toggle("foodie-mobile-menu__list--active"),s.classList.toggle("foodie-mobile-menu__list--transition"),this.classList.toggle("foodie-menu__btn--active"),this.setAttribute("aria-expanded",this.getAttribute("aria-expanded")==="true"?"false":"true")}function a(){s.classList.remove("foodie-mobile-menu__list--active"),s.classList.remove("foodie-mobile-menu__list--transition"),o.classList.remove("foodie-menu__btn--active"),o.setAttribute("aria-expanded","false")}function r(){this.classList.remove("foodie-mobile-menu__list--transition")}o&&s&&(o.addEventListener("click",i,!1),s.addEventListener("transitionend",r,!1),t.addEventListener("resize",a,!1))})(document,window),lazyLoadImages=function(){for(var e,n,s=document.getElementsByTagName("img"),t=0;t<s.length;t++)e=s[t],n=e.getAttribute("data-src"),e.hasAttribute("data-src")&&n!==""&&(e.setAttribute("src",n),e.removeAttribute!==void 0?e.removeAttribute("data-src"):e.setAttribute("data-src",""))},initMarker=function(){var e,t,n,o,i,s=document.getElementById("marker");s&&(o="https://markiere-den.reisko.ch/",i=window.location.pathname,t=o+"?t="+encodeURI(i),n=document.referrer,n&&(t=t+"&r="+encodeURI(n)),e=document.createElement("img"),e.setAttribute("src",t),e.setAttribute("height","1"),e.setAttribute("width","1"),e.setAttribute("alt","marker"),s.appendChild(e))},scrollHandler=function(e){initTopNavScrollHandler(e),initScrollToTopScrollHandler(e)},initTopNavScrollHandler=function(){var t=document.getElementById("top-nav");document.body.scrollTop>195||document.documentElement.scrollTop>195?t.classList.add("menu-fixed"):t.classList.remove("menu-fixed")},initScrollToTopScrollHandler=function(){var n,t=document.getElementById("js-scroll-to-top");t.addEventListener("click",scrollToTop,!1),n="ontouchstart"in window||navigator.msMaxTouchPoints>0,n||(t.removeAttribute("href"),t.addEventListener("click",e=>{scrollToTop(e)})),document.body.scrollTop>300||document.documentElement.scrollTop>300?t.classList.add("scroll-to-top__visible"):t.classList.remove("scroll-to-top__visible")},scrollToTop=function(){window.scroll({top:0,left:0,behavior:"smooth"})},scrollSelectedTimelineItemIntoView=function(e,t,n){var s,o,a,i=document.getElementById(n);i&&(s=i.clientWidth,o=e/t,o>.35&&(a=o<.7?s*o:s+s/2,i.scrollBy({top:0,left:a,behavior:"smooth"})))},initServiceWorker=function(){"serviceWorker"in navigator&&(navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(()=>{console.info("Service Worker Registered")},e=>console.error("Service Worker registration failed: ",e)),navigator.serviceWorker.ready.then(()=>{console.info("Service Worker Ready")}))},initPantryDisclaimer=function(){var e,t;const n=document.getElementsByClassName("amz-link");t=n&&n.length>0,e=document.getElementById("js-pantry-disclaimer"),t&&e&&e.classList.add("display-block")},window.addEventListener("load",initServiceWorker,!1),window.addEventListener("load",initPantryDisclaimer,!1),window.addEventListener("load",lazyLoadImages,!1),window.addEventListener("load",initMarker,!1),window.addEventListener("scroll",scrollHandler,!1);const cookieBannerDisplayedKey="der.reisko.ch.cookieBannerDisplayed",cookieConsentGivenKey="der.reisko.ch.cookieConsentGiven";loadAds=function(e){var t=document.createElement("script");t.type="text/javascript",t.setAttribute("crossorigin","anonymous"),t.setAttribute("async","true"),t.setAttribute("src","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"),t.readyState?t.onreadystatechange=function(){var n=/loaded|complete/g;n.test(t.readyState)&&e()}:t.addEventListener("load",e,!1),document.documentElement.firstChild.appendChild(t)},hasCookieBannerBeenDisplayed=function(){return localStorage.getItem(cookieBannerDisplayedKey)&&localStorage.getItem(cookieBannerDisplayedKey)==="true"},hasCookieConsentBeenGiven=function(){return localStorage.getItem(cookieConsentGivenKey)&&localStorage.getItem(cookieConsentGivenKey)==="true"},showAdSlots=function(){var e,t,n=document.getElementById("widget-ads");n&&(n.style.display="block"),t=document.getElementsByClassName("adslot");for(e=0;e<t.length;e++)t[e].style.display="flex"},activateCookieDependendFunctionality=function(){showAdSlots(),loadAds()},initCookieHandling=function(){if(hasCookieBannerBeenDisplayed())hasCookieConsentBeenGiven()&&activateCookieDependendFunctionality();else{const e=document.getElementById("cookie-container"),t=document.getElementById("cookie-btn-accept"),n=document.getElementById("cookie-btn-decline");t.addEventListener("click",()=>{e.classList.remove("active"),localStorage.setItem(cookieBannerDisplayedKey,"true"),localStorage.setItem(cookieConsentGivenKey,"true"),activateCookieDependendFunctionality()}),n.addEventListener("click",()=>{e.classList.remove("active"),localStorage.setItem(cookieBannerDisplayedKey,"true"),localStorage.setItem(cookieConsentGivenKey,"false")}),setTimeout(()=>{e.classList.add("active")},2500)}},window.addEventListener("load",function(){initCookieHandling()}),comments={get:function(e,t){var s,o,i,c=document.getElementById("sid"),a=document.getElementById("pid"),r="https://kommentiere-den.reisko.ch/",n=new Object;c&&(n.sid=c.value),a&&(n.pid=a.value),i=!0;for(o in n)n.hasOwnProperty(o)&&(r+=(i?"?":"&")+o+"="+n[o]),i=!1;n.hasOwnProperty("sid")&&n.hasOwnProperty("pid")&&(s=new XMLHttpRequest,s.open("GET",r),s.onload=t,s.send())},post:function(e,t){var s,o="https://kommentiere-den.reisko.ch/",n=new FormData;for(let t in e)n.append(t,e[t]);n.append("sid",document.getElementById("sid").value),n.append("pid",document.getElementById("pid").value),s=new XMLHttpRequest,s.open("POST",o),s.onload=t,s.send(n)},load:function(){comments.get({},function(){document.getElementById("cwrap").innerHTML=this.response})},add:function(){return comments.post({name:document.getElementById("cname").value,email:document.getElementById("cmail").value,website:document.getElementById("cwebsite").value,msg:document.getElementById("cmsg").value},function(){this.response&&this.response.trim()==="OK"?(document.getElementById("cadd").reset(),comments.load()):alert("blubb",this.response)}),!1}},comments.load()