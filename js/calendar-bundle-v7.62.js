(()=>{var S=(e,t,i)=>{let n={value:t,label:i};e.push(n)},v=S;var M=(e,t)=>{let i="";return e.includes(t)?e.split(t).forEach((o,r)=>{let l=r>0?t:"";i+=l+M(o,t)}):i=e.charAt(0).toUpperCase()+e.slice(1),i},p=M;var B=e=>{let t=e;return t=p(t," "),t=p(t,"-"),t=t.replace(" Am "," am "),t=t.replace(" Bei "," bei "),t=t.replace(" Ob Der "," ob der "),t.trim(),t},A=B;var T=(e,t,i)=>{let n="";for(let o=0;o<e.length;o++)i?e[o].label===t&&(n=e[o].value):e[o].label.toLowerCase()===t.toLowerCase()&&(n=e[o].value);return n},C=T;var H=(e,t)=>{let i=[];for(let n=0;n<e.length;n++){let o=e[n].value;t.includes(o)&&i.push(e[n])}return i},f=H;var s=[],N=(e,t)=>{let i=s.findIndex(n=>n.key===e);i!==-1?s[i].value=t:s.push({key:e,value:t})},j=e=>{s.reduce,s.splice(s.findIndex(t=>t.key===e),1)},u=(e,t,i,n)=>{t&&t.addEventListener("khao-select-field-change",o=>{let r=o.detail.value;r!=i?N(e,r):j(e),n()})};var c="-1",a,y,h,g,F=[],O=[],x=[],d,m=()=>{d.forEach(e=>{let t=e.getAttribute("data-month"),i=e.getAttribute("data-city"),n=e.getAttribute("data-country");e.classList.remove("calendar-item--no-match"),s.forEach(o=>{let r=!0;o.key==="month"&&t!==o.value&&(r=!1),o.key==="country"&&n!==o.value&&(r=!1),o.key==="city"&&i!==o.value&&(r=!1),r||e.classList.add("calendar-item--no-match")})}),k()},k=()=>{let e=document.querySelectorAll(".calendar-item--no-match"),t=d.length,i=e.length,n=t-i;console.log(t,i,n),g=document.getElementById("js-display-number-of-matches"),g&&(g.innerHTML=`${n}`)},w=()=>{let e=JSON.parse(document.getElementById("js-filter-month-values").textContent),t=JSON.parse(document.getElementById("js-filter-country-values").textContent),i=JSON.parse(document.getElementById("js-filter-city-values").textContent),n=[],o=[],r=[];d=document.querySelectorAll(".calendar-item"),d.forEach(l=>{let b=l.getAttribute("data-month");n.includes(b)||n.push(b);let E=l.getAttribute("data-country");r.includes(E)||r.push(E);let L=l.getAttribute("data-city");o.includes(L)||o.push(L)}),n.push(c),F=f(e,n),O=i,o.sort().forEach(l=>{v(O,l,A(l))}),r.push(c),x=f(t,r),a=document.getElementById("js-select-month"),a.setAttribute("options",JSON.stringify(F)),h=document.getElementById("js-select-country"),h.setAttribute("options",JSON.stringify(x)),y=document.getElementById("js-select-city"),y.setAttribute("options",JSON.stringify(O)),u("month",a,c,m),u("country",h,c,m),u("city",y,c,m)},J=()=>{if(window.location.hash){let e=window.location.hash.replace("#","");if(e){let t=C(F,e,!1);t&&(a=document.getElementById("js-select-month"),a.setAttribute("selectedValue",t))}}},I=()=>{w(),J(),m()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded"),I()}):I();})();
