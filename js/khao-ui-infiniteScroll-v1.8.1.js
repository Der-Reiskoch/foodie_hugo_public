import{c as O,S as B,i as P,s as E,a as q,e as C,g as F,h as I,A as k,o as z,f as g,d as D,j as H,t as c,k as f,l as _,B as G,C as J,r as M,v as T,w as j,x as S,D as K}from"./khao-ui-button-v1.8.1.js";import{i as N}from"./khao-ui-image-v1.8.1.js";const Q=(r,e)=>{const n=s=>{s.forEach(i=>{i.isIntersecting&&e&&e()})},t={root:document,rootMargin:"0px 0px 100px 0px",threshold:1};new IntersectionObserver(n,t).observe(r)},v=["1"],R=(r,e,n)=>{const t=document.location.href;let o="1",s="2",i=`${t}${e}${s}`;if(t.includes(e)){const l=t.split(e);l.length===2&&(o=l[1].replace("/",""),s=`${parseInt(o,10)+1}`,i=t.replace(`/${o}`,`/${s}`))}v.indexOf(s)===-1?(fetch(i).then(l=>{if(!l.ok)throw new Error(`error loading next page ${i} , perhaps we have reached the end!`);return l.text()}).then(l=>{const h=document.querySelector(`${r}:last-of-type`);var b=document.createElement("template");b.innerHTML=l,b.content.querySelectorAll(r).forEach(m=>{var u;(u=h==null?void 0:h.parentElement)==null||u.appendChild(m)}),n!==void 0&&n(),history.pushState({},"",i)}).catch(l=>{console.log(l)}),v.push(s)):console.log("already added",s)};function V(r){q(r,"svelte-wcxk2y",":host{--khao-spinner-color:var(--khao-sys-color-neutral30);--khao-spinner-size:var(--khao-sys-size-regular-10)}.spinner.svelte-wcxk2y{width:var(--khao-spinner-size);height:var(--khao-spinner-size);border:5px solid var(--khao-spinner-color);border-bottom-color:transparent;border-radius:50%;display:inline-block;box-sizing:border-box;animation:svelte-wcxk2y-rotation 1s linear infinite}@keyframes svelte-wcxk2y-rotation{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}")}function W(r){let e;return{c(){e=C("div"),F(e,"class","spinner svelte-wcxk2y")},m(n,t){I(n,e,t)},p:k,i:k,o:k,d(n){n&&z(e)}}}class A extends B{constructor(e){super(),P(this,e,null,W,E,{},V)}}customElements.define("khao-spinner",O(A,{},[],[],!0));function X(r){q(r,"svelte-14hyps5",".infinite-scroll.svelte-14hyps5{display:flex;justify-content:space-around;width:100%;height:2rem}")}function x(r){let e,n;return e=new J({props:{label:r[0],onClick:r[4]}}),{c(){M(e.$$.fragment)},m(t,o){T(e,t,o),n=!0},p(t,o){const s={};o&1&&(s.label=t[0]),e.$set(s)},i(t){n||(c(e.$$.fragment,t),n=!0)},o(t){f(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function L(r){let e,n;return e=new A({}),{c(){M(e.$$.fragment)},m(t,o){T(e,t,o),n=!0},i(t){n||(c(e.$$.fragment,t),n=!0)},o(t){f(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function Y(r){let e,n,t,o=r[1]&&x(r),s=r[2]&&L();return{c(){e=C("div"),o&&o.c(),n=D(),s&&s.c(),F(e,"class","infinite-scroll svelte-14hyps5")},m(i,l){I(i,e,l),o&&o.m(e,null),H(e,n),s&&s.m(e,null),r[9](e),t=!0},p(i,[l]){i[1]?o?(o.p(i,l),l&2&&c(o,1)):(o=x(i),o.c(),c(o,1),o.m(e,n)):o&&(S(),f(o,1,1,()=>{o=null}),_()),i[2]?s?l&4&&c(s,1):(s=L(),s.c(),c(s,1),s.m(e,null)):s&&(S(),f(s,1,1,()=>{s=null}),_())},i(i){t||(c(o),c(s),t=!0)},o(i){f(o),f(s),t=!1},d(i){i&&z(e),o&&o.d(),s&&s.d(),r[9](null)}}}function Z(r,e,n){let t=!1,o=!1,s=1;const i=new CustomEvent("khao-infinite-scroll-loaded-more",{bubbles:!0}),l=()=>{s<parseInt(p,10)&&n(1,t=!0)},h=()=>{R(m,u,b),n(1,t=!1),n(2,o=!0),s++},b=()=>{n(1,t=!1),n(2,o=!1),window.dispatchEvent(i)};let d;G(()=>{N(w)&&n(1,t=!0),Q(d,l)});let{querySelector:m}=e,{paginationSlug:u}=e,{buttonLabel:y}=e,{numberOfPages:p="1"}=e,{showButtonOnFirstLoad:w="true"}=e;function U(a){K[a?"unshift":"push"](()=>{d=a,n(3,d)})}return r.$$set=a=>{"querySelector"in a&&n(5,m=a.querySelector),"paginationSlug"in a&&n(6,u=a.paginationSlug),"buttonLabel"in a&&n(0,y=a.buttonLabel),"numberOfPages"in a&&n(7,p=a.numberOfPages),"showButtonOnFirstLoad"in a&&n(8,w=a.showButtonOnFirstLoad)},[y,t,o,d,h,m,u,p,w,U]}class $ extends B{constructor(e){super(),P(this,e,Z,Y,E,{querySelector:5,paginationSlug:6,buttonLabel:0,numberOfPages:7,showButtonOnFirstLoad:8},X)}get querySelector(){return this.$$.ctx[5]}set querySelector(e){this.$$set({querySelector:e}),g()}get paginationSlug(){return this.$$.ctx[6]}set paginationSlug(e){this.$$set({paginationSlug:e}),g()}get buttonLabel(){return this.$$.ctx[0]}set buttonLabel(e){this.$$set({buttonLabel:e}),g()}get numberOfPages(){return this.$$.ctx[7]}set numberOfPages(e){this.$$set({numberOfPages:e}),g()}get showButtonOnFirstLoad(){return this.$$.ctx[8]}set showButtonOnFirstLoad(e){this.$$set({showButtonOnFirstLoad:e}),g()}}customElements.define("khao-infinite-scroll",O($,{querySelector:{},paginationSlug:{},buttonLabel:{},numberOfPages:{},showButtonOnFirstLoad:{}},[],[],!0));
